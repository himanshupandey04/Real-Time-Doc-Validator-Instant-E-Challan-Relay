{% extends "base.html" %}

{% block content %}
<h1 class="h3 mb-4 text-gray-800 fw-bold">Violation History</h1>
<div class="card card-custom shadow mb-4">
    <div class="card-header py-3 d-flex justify-content-between align-items-center">
        <h6 class="m-0 font-weight-bold text-primary">All Records</h6>
        <button class="btn btn-sm btn-success"><i class="fas fa-file-excel me-1"></i> Export CSV</button>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-bordered table-striped" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Challan ID</th>
                        <th>Vehicle</th>
                        <th>Violation</th>
                        <th>Owner Name</th>
                        <th>Fine</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for c in challans %}
                    <tr>
                        <td>{{ c.issue_timestamp }}</td>
                        <td>{{ c.challan_id }}</td>
                        <td class="fw-bold">{{ c.plate_number }}</td>
                        <td>{{ c.violation_type }}</td>
                        <td>{{ c.owner_name }}</td>
                        <td>{{ c.fine_amount | currency }}</td>
                        <td>
                            <span class="badge bg-{{ 'success' if c.status == 'Paid' else 'danger' }}">
                                {{ c.status }}
                            </span>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}